
Starting the LV1 simulation, Current time  2024-08-31 05:00:02.416958
we are going to start clean...
getting PFM info...
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
removing PFM info file...
now removing all input files...
PFM info was saved as /scratch/PFM_Simulations/PFM_run_info.pkl
Starting: driver_run_forecast_LV1
Current local Time = 2024-08-31 05:00:02.964875 UTC =  2024-08-31 12:00:02.964878+00:00  Fetch time =  2024-08-30 12:00:00

Preparing forecast starting on 20240830 at  1200
ocean boundary and initial conditions will be from:
hycom
atm forcing will be from:
nam_nest

Getting OCN forecast data. Going to use subprocess, and save a pickle file of ocn data.
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
in the parallel ncks switch
Time to get full file using parallel ncks = 73.42 sec
Return code = 0 (0=success, 1=skipped ncks)

max and min raw hycom data (iz is top [0] to bottom [39]):
max zeta   =  0.393 m          at  ( it, ilat, ilon)     =  ( 18,   5,   3)
min zeta   = -0.056 m          at  ( it, ilat, ilon)     =  (  0, 179,  20)
max u      =  0.410 m/s        at  ( it, iz, ilat, ilon) =  (  5,  9,  68,  45)
min u      = -0.443 m/s        at  ( it, iz, ilat, ilon) =  ( 16,  5,  44,  79)
max v      =  0.451 m/s        at  ( it, iz, ilat, ilon) =  (  9,  4, 115,  70)
min v      = -0.709 m/s        at  ( it, iz, ilat, ilon) =  (  4,  0, 193,   0)
max temp   = 25.195 C          at  ( it, iz, ilat, ilon) =  ( 20,  0, 126,  77)
min temp   =  1.385 C          at  ( it, iz, ilat, ilon) =  (  0, 38,  56,   3)
max dT/dz  =  2.998 C/m        at  ( it, iz, ilat, ilon) =  ( 16,  1, 113,  82)
min dT/dz  = -0.064 C/m        at  ( it, iz, ilat, ilon) =  (  8, 13, 131,  70)
max salt   = 34.713 psu        at  ( it, iz, ilat, ilon) =  (  0, 37, 134,  33)
min salt   = 32.490 psu        at  ( it, iz, ilat, ilon) =  (  2, 10, 124,  10)
max dS/dz  =  0.107 psu/m      at  ( it, iz, ilat, ilon) =  (  1,  3, 100,  81)
min dS/dz  = -0.052 psu/m      at  ( it, iz, ilat, ilon) =  ( 17,  8, 111,   4)

Hycom OCN dict saved with pickle
did subprocess run correctly? 0 (0=yes,1=no)
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
/scratch/PFM_Simulations/LV1_Forecast/Forc/hycom_tmp_pckl_file.pkl
OCN dict loaded with pickle
this took:
0:01:50.450395


starting: ocnfuns.hycom_to_roms_latlon(OCN,RMG)
putting the hycom data in /scratch/PFM_Simulations/LV1_Forecast/Forc/hycom_tmp_pckl_file.pkl on the roms grid...
and saving 17 pickle files...
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
...done. 
all 17 ocnR pickle files were made correctly
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl

max and min of hycom data on ROMS grid (iz is top [0] to bottom [39]):
max zeta   =  0.328 m          at  ( it, ilat, ilon)     =  ( 20,  30,   0)
min zeta   = -0.045 m          at  ( it, ilat, ilon)     =  (  1, 389,  86)
max urm    =  0.447 m/s        at  ( it, iz, ilat, ilon) =  (  4,  9, 133,  58)
min urm    = -0.438 m/s        at  ( it, iz, ilat, ilon) =  ( 16,  3,  26, 156)
max vrm    =  0.440 m/s        at  ( it, iz, ilat, ilon) =  (  9,  4, 191, 201)
min vrm    = -0.577 m/s        at  ( it, iz, ilat, ilon) =  (  5,  0, 155, 233)
max temp   = 25.068 C          at  ( it, iz, ilat, ilon) =  ( 20,  0, 204, 237)
min temp   =  1.389 C          at  ( it, iz, ilat, ilon) =  (  0, 38, 208,   1)
max dT/dz  =  2.935 C/m        at  ( it, iz, ilat, ilon) =  ( 16,  1, 168, 243)
min dT/dz  = -0.311 C/m        at  ( it, iz, ilat, ilon) =  ( 19,  2, 279, 182)
max salt   = 34.712 psu        at  ( it, iz, ilat, ilon) =  (  0, 37, 290,  86)
min salt   = 32.492 psu        at  ( it, iz, ilat, ilon) =  (  1, 10, 302,   1)
max dS/dz  =  0.107 psu/m      at  ( it, iz, ilat, ilon) =  (  1,  3, 141, 227)
min dS/dz  = -0.043 psu/m      at  ( it, iz, ilat, ilon) =  ( 16,  5, 295, 143)
driver_run_forecast_LV1: done with hycom_to_roms_latlon
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
this took:
0:01:37.759616


making the depth pickle file...
making roms depth pickle file /scratch/PFM_Simulations/LV1_Forecast/Forc/roms_tmp_depth_file.pkl...
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
ROMS depths for IC/BC saved with pickle to /scratch/PFM_Simulations/LV1_Forecast/Forc/roms_tmp_depth_file.pkl
...done makeing depth pickle file.
subprocess return code? 0 (0=good)
this took:
0:00:02.041177


going to save OCN_IC to a pickle file: /scratch/PFM_Simulations/LV1_Forecast/Forc/ocnIC_tmp_pckl_file.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
OCN_IC dict saved with pickle
OCN IC data saved with pickle, correctly? 0 (0=yes,1=no)
driver_run_forecast_LV1: done with ocn_r_2_ICdict
this took:
0:00:27.083764


making IC file from pickled IC: /scratch/PFM_Simulations/LV1_Forecast/Forc/LV1_OCEAN_IC.nc
OCN_IC dict loaded with pickle

max and min of data in ROMS IC file (iz is bottom [0] to top [39], note: it is always 0 b/c IC):
max zeta   =  0.305 m          at  ( it, ilat, ilon)     =  (  0,  28,   0)
min zeta   = -0.045 m          at  ( it, ilat, ilon)     =  (  0, 389,  83)
max ubar   =  0.142 m/s        at  ( it, ilat, ilon)     =  (  0, 162, 175)
min ubar   = -0.174 m/s        at  ( it, ilat, ilon)     =  (  0, 265, 138)
max vbar   =  0.238 m/s        at  ( it, ilat, ilon)     =  (  0, 169, 205)
min vbar   = -0.129 m/s        at  ( it, ilat, ilon)     =  (  0, 157, 230)
max u      =  0.386 m/s        at  ( it, iz, ilat, ilon) =  (  0, 30, 135,  54)
min u      = -0.421 m/s        at  ( it, iz, ilat, ilon) =  (  0, 35,  25, 157)
max v      =  0.393 m/s        at  ( it, iz, ilat, ilon) =  (  0, 33, 189, 200)
min v      = -0.437 m/s        at  ( it, iz, ilat, ilon) =  (  0, 39, 326,  41)
max temp   = 23.133 C          at  ( it, iz, ilat, ilon) =  (  0, 39, 189, 243)
min temp   =  0.961 C          at  ( it, iz, ilat, ilon) =  (  0,  0, 106,  41)
max salt   = 34.709 psu        at  ( it, iz, ilat, ilon) =  (  0,  0,   7,  42)
min salt   = 32.494 psu        at  ( it, iz, ilat, ilon) =  (  0, 30, 302,   1)
OCN IC nc data saved, correctly? 0 (0=yes)
done makeing IC file.
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
this took:
0:00:04.216888


going to save OCN_BC to a pickle file to:
/scratch/PFM_Simulations/LV1_Forecast/Forc/ocnBC_tmp_pckl_file.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
loading /scratch/PFM_Simulations/LV1_Forecast/Forc/roms_tmp_depth_file.pkl
OCN_BC dict saved with pickle
OCN BC data saved with pickle, correctly? 0 (0=yes)
this took:
0:00:06.268459


making BC nc file from pickled BC: /scratch/PFM_Simulations/LV1_Forecast/Forc/LV1_OCEAN_BC.nc
OCN_BC dict loaded with pickle

max and min of data in ROMS BC file (iz is bottom [0] to top [39]):
max zeta_north =  0.147 m          at  ( it, ilon)     =  ( 20,   0)
min zeta_north = -0.045 m          at  ( it, ilon)     =  (  1,  86)
max zeta_south =  0.314 m          at  ( it, ilon)     =  ( 11,   0)
min zeta_south =  0.030 m          at  ( it, ilon)     =  (  1, 159)
max zeta_west  =  0.328 m          at  ( it, ilat)     =  ( 20,  30)
min zeta_west  =  0.075 m          at  ( it, ilat)     =  (  5, 156)
max ubar_north =  0.036 m/s        at  ( it, ilon)     =  ( 19, 127)
min ubar_north = -0.015 m/s        at  ( it, ilon)     =  (  5,   1)
max ubar_south =  0.025 m/s        at  ( it, ilon)     =  ( 20, 150)
min ubar_south = -0.049 m/s        at  ( it, ilon)     =  ( 15, 240)
max ubar_west  =  0.052 m/s        at  ( it, ilat)     =  ( 18, 130)
min ubar_west  = -0.031 m/s        at  ( it, ilat)     =  ( 18, 297)
max vbar_north =  0.146 m/s        at  ( it, ilon)     =  (  1,  98)
min vbar_north = -0.021 m/s        at  ( it, ilon)     =  (  0,  30)
max vbar_south =  0.076 m/s        at  ( it, ilon)     =  (  8, 184)
min vbar_south = -0.038 m/s        at  ( it, ilon)     =  ( 20, 137)
max vbar_west  =  0.021 m/s        at  ( it, ilat)     =  (  8, 341)
min vbar_west  = -0.017 m/s        at  ( it, ilat)     =  (  0, 215)
max u_north    =  0.289 m/s        at  ( it, iz, ilon) =  (  0,  32,  29)
min u_north    = -0.153 m/s        at  ( it, iz, ilon) =  ( 15,  35, 114)
max u_south    =  0.230 m/s        at  ( it, iz, ilon) =  ( 19,  32, 150)
min u_south    = -0.294 m/s        at  ( it, iz, ilon) =  ( 12,  39,  45)
max u_west     =  0.375 m/s        at  ( it, iz, ilat) =  ( 12,  32, 129)
min u_west     = -0.433 m/s        at  ( it, iz, ilat) =  ( 20,  39, 293)
max v_north    =  0.330 m/s        at  ( it, iz, ilon) =  (  1,  21, 107)
min v_north    = -0.377 m/s        at  ( it, iz, ilon) =  (  2,  39,  31)
max v_south    =  0.409 m/s        at  ( it, iz, ilon) =  (  2,  32, 181)
min v_south    = -0.459 m/s        at  ( it, iz, ilon) =  (  6,  39, 127)
max v_west     =  0.106 m/s        at  ( it, iz, ilat) =  (  0,  32, 329)
min v_west     = -0.421 m/s        at  ( it, iz, ilat) =  ( 20,  39, 180)
max temp_north = 19.254 C          at  ( it, iz, ilon) =  ( 20,  39,   0)
min temp_north =  1.061 C          at  ( it, iz, ilon) =  ( 13,   0,   4)
max temp_south = 21.969 C          at  ( it, iz, ilon) =  ( 11,  39, 221)
min temp_south =  1.105 C          at  ( it, iz, ilon) =  (  4,   0,   0)
max temp_west  = 21.196 C          at  ( it, iz, ilat) =  ( 20,  39,   0)
min temp_west  =  1.050 C          at  ( it, iz, ilat) =  ( 12,   0, 360)
max salt_north = 34.708 psu        at  ( it, iz, ilon) =  (  0,   0,   0)
min salt_north = 33.004 psu        at  ( it, iz, ilon) =  ( 20,  27,   0)
max salt_south = 34.707 psu        at  ( it, iz, ilon) =  ( 13,   0,   0)
min salt_south = 33.143 psu        at  ( it, iz, ilon) =  (  7,  28, 118)
max salt_west  = 34.709 psu        at  ( it, iz, ilat) =  (  1,   0,  65)
min salt_west  = 32.493 psu        at  ( it, iz, ilat) =  (  1,  30, 302)
OCN BC nc data saved, correctly? 0 (0=yes)
done makeing BC nc file.
this took:
0:00:00.787862


getting the atm data now...
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl

ATM dict saved with pickle.
return code: 0 (0=good)
...done.
this took:
0:00:40.016609


PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
done with plotting ATM fields
this took:
0:00:05.661774


in atmfuns.get_atm_data_on_roms_grid(ATM,RMG)
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl

ATM on roms grid dict saved with pickle.
return code: 0 (0=good)
done with: atmfuns.get_atm_data_on_roms_grid(ATM,RMG)
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
done with: pltfuns.plot_all_fields_in_one(ATM, ATM_R, RMG, PFM)
this took:
0:00:11.858369


driver_run_forcast_LV1: saving ATM file to /scratch/PFM_Simulations/LV1_Forecast/Forc/LV1_ATM_FORCING.nc
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
return code: 0 (0=good)
driver_run_forecast_LV1:  done with writing ATM.nc file.
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
done with pltfuns.load_and_plot_atm(PFM)
this took:
0:00:05.166552


driver_run_forecast_LV1:  now make .in and .sb files
 --- making dot_in for 
...done
now running roms with slurm
run_slurm_LV1: current directory is now:  /scratch/PFM_Simulations/LV1_Forecast/Run
CompletedProcess(args=['sbatch', '--wait', 'LV1_SLURM.sb'], returncode=0, stdout=b'Submitted batch job 358\n', stderr=b'')
subprocess slurm ran correctly? 0 (0=yes)
run_slurm_LV1: run command:  ['sbatch', '--wait', 'LV1_SLURM.sb']
this took:
0:06:02.045038



Finished the LV1 simulation
now making LV1 history file plots
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
Current time:  2024-08-31 05:11:20.948844
total time to run script was:
0:11:17.443645


