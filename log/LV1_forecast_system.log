
Starting the LV1 simulation, Current time  2024-09-04 04:00:02.926964
we are going to start clean...
getting PFM info...
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
removing PFM info file...
now removing all input files...
PFM info was saved as /scratch/PFM_Simulations/PFM_run_info.pkl
Starting: driver_run_forecast_LV1
Current local Time = 2024-09-04 04:00:02.995419 UTC =  2024-09-04 11:00:02.995423+00:00  Fetch time =  2024-09-03 12:00:00

Preparing forecast starting on 20240903 at  1200
ocean boundary and initial conditions will be from:
hycom
atm forcing will be from:
nam_nest

Getting OCN forecast data. Going to use subprocess, and save a pickle file of ocn data.
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
in the parallel ncks switch
Time to get full file using parallel ncks = 716.06 sec
Return code = 0 (0=success, 1=skipped ncks)

max and min raw hycom data (iz is top [0] to bottom [39]):
max zeta   =  0.388 m          at  ( it, ilat, ilon)     =  (  1,   0,   0)
min zeta   = -0.088 m          at  ( it, ilat, ilon)     =  (  9, 181,   5)
max u      =  0.521 m/s        at  ( it, iz, ilat, ilon) =  ( 20,  0, 135,  63)
min u      = -0.512 m/s        at  ( it, iz, ilat, ilon) =  ( 16,  6,  49,  77)
max v      =  0.395 m/s        at  ( it, iz, ilat, ilon) =  (  3,  0, 143,  55)
min v      = -0.624 m/s        at  ( it, iz, ilat, ilon) =  (  0,  0, 194,   0)
max temp   = 26.238 C          at  ( it, iz, ilat, ilon) =  ( 20,  0,  84,  90)
min temp   =  1.385 C          at  ( it, iz, ilat, ilon) =  (  1, 38,  57,   4)
max dT/dz  =  3.102 C/m        at  ( it, iz, ilat, ilon) =  (  4,  1, 123,  79)
min dT/dz  = -0.067 C/m        at  ( it, iz, ilat, ilon) =  ( 20, 13, 131,  70)
max salt   = 34.839 psu        at  ( it, iz, ilat, ilon) =  (  0, 24, 121,  57)
min salt   = 32.875 psu        at  ( it, iz, ilat, ilon) =  (  0, 15, 104,  19)
max dS/dz  =  0.072 psu/m      at  ( it, iz, ilat, ilon) =  ( 13,  5,  89,  79)
min dS/dz  = -0.049 psu/m      at  ( it, iz, ilat, ilon) =  ( 19,  5,  84,  78)

Hycom OCN dict saved with pickle
did subprocess run correctly? 0 (0=yes,1=no)
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
/scratch/PFM_Simulations/LV1_Forecast/Forc/hycom_tmp_pckl_file.pkl
OCN dict loaded with pickle
this took:
0:12:33.196006


starting: ocnfuns.hycom_to_roms_latlon(OCN,RMG)
putting the hycom data in /scratch/PFM_Simulations/LV1_Forecast/Forc/hycom_tmp_pckl_file.pkl on the roms grid...
and saving 17 pickle files...
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
...done. 
all 17 ocnR pickle files were made correctly
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl

max and min of hycom data on ROMS grid (iz is top [0] to bottom [39]):
max zeta   =  0.313 m          at  ( it, ilat, ilon)     =  (  2,  32,  13)
min zeta   = -0.025 m          at  ( it, ilat, ilon)     =  ( 15, 389,  87)
max urm    =  0.431 m/s        at  ( it, iz, ilat, ilon) =  ( 20,  8, 139,  45)
min urm    = -0.522 m/s        at  ( it, iz, ilat, ilon) =  ( 16,  3,  39, 162)
max vrm    =  0.363 m/s        at  ( it, iz, ilat, ilon) =  (  3,  0, 274, 172)
min vrm    = -0.623 m/s        at  ( it, iz, ilat, ilon) =  ( 20,  0, 182, 227)
max temp   = 25.873 C          at  ( it, iz, ilat, ilon) =  ( 11,  0, 181, 245)
min temp   =  1.389 C          at  ( it, iz, ilat, ilon) =  (  0, 38, 208,   1)
max dT/dz  =  2.840 C/m        at  ( it, iz, ilat, ilon) =  (  4,  1, 195, 241)
min dT/dz  = -0.373 C/m        at  ( it, iz, ilat, ilon) =  (  5,  2, 279, 182)
max salt   = 34.746 psu        at  ( it, iz, ilat, ilon) =  (  0, 24, 225, 159)
min salt   = 32.880 psu        at  ( it, iz, ilat, ilon) =  (  0, 15, 249,   9)
max dS/dz  =  0.071 psu/m      at  ( it, iz, ilat, ilon) =  ( 13,  5, 120, 209)
min dS/dz  = -0.047 psu/m      at  ( it, iz, ilat, ilon) =  ( 18,  5, 110, 203)
driver_run_forecast_LV1: done with hycom_to_roms_latlon
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
this took:
0:01:36.828523


making the depth pickle file...
making roms depth pickle file /scratch/PFM_Simulations/LV1_Forecast/Forc/roms_tmp_depth_file.pkl...
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
ROMS depths for IC/BC saved with pickle to /scratch/PFM_Simulations/LV1_Forecast/Forc/roms_tmp_depth_file.pkl
...done makeing depth pickle file.
subprocess return code? 0 (0=good)
this took:
0:00:02.074858


going to save OCN_IC to a pickle file: /scratch/PFM_Simulations/LV1_Forecast/Forc/ocnIC_tmp_pckl_file.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
OCN_IC dict saved with pickle
OCN IC data saved with pickle, correctly? 0 (0=yes,1=no)
driver_run_forecast_LV1: done with ocn_r_2_ICdict
this took:
0:00:26.806843


making IC file from pickled IC: /scratch/PFM_Simulations/LV1_Forecast/Forc/LV1_OCEAN_IC.nc
OCN_IC dict loaded with pickle

max and min of data in ROMS IC file (iz is bottom [0] to top [39], note: it is always 0 b/c IC):
max zeta   =  0.306 m          at  ( it, ilat, ilon)     =  (  0,  25,   0)
min zeta   = -0.020 m          at  ( it, ilat, ilon)     =  (  0, 389,  83)
max ubar   =  0.138 m/s        at  ( it, ilat, ilon)     =  (  0, 162, 175)
min ubar   = -0.179 m/s        at  ( it, ilat, ilon)     =  (  0, 265, 138)
max vbar   =  0.190 m/s        at  ( it, ilat, ilon)     =  (  0,  50, 236)
min vbar   = -0.131 m/s        at  ( it, ilat, ilon)     =  (  0, 295, 119)
max u      =  0.371 m/s        at  ( it, iz, ilat, ilon) =  (  0, 31, 129,  51)
min u      = -0.419 m/s        at  ( it, iz, ilat, ilon) =  (  0, 35,  30, 158)
max v      =  0.343 m/s        at  ( it, iz, ilat, ilon) =  (  0, 34, 193, 202)
min v      = -0.487 m/s        at  ( it, iz, ilat, ilon) =  (  0, 39, 182,  16)
max temp   = 23.808 C          at  ( it, iz, ilat, ilon) =  (  0, 39, 182, 245)
min temp   =  0.961 C          at  ( it, iz, ilat, ilon) =  (  0,  0, 106,  41)
max salt   = 34.709 psu        at  ( it, iz, ilat, ilon) =  (  0,  0,   7,  42)
min salt   = 32.880 psu        at  ( it, iz, ilat, ilon) =  (  0, 27, 249,   9)
OCN IC nc data saved, correctly? 0 (0=yes)
done makeing IC file.
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
this took:
0:00:04.257458


going to save OCN_BC to a pickle file to:
/scratch/PFM_Simulations/LV1_Forecast/Forc/ocnBC_tmp_pckl_file.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
loading /scratch/PFM_Simulations/LV1_Forecast/Forc/roms_tmp_depth_file.pkl
OCN_BC dict saved with pickle
OCN BC data saved with pickle, correctly? 0 (0=yes)
this took:
0:00:06.211029


making BC nc file from pickled BC: /scratch/PFM_Simulations/LV1_Forecast/Forc/LV1_OCEAN_BC.nc
OCN_BC dict loaded with pickle

max and min of data in ROMS BC file (iz is bottom [0] to top [39]):
max zeta_north =  0.086 m          at  ( it, ilon)     =  (  3,   2)
min zeta_north = -0.025 m          at  ( it, ilon)     =  ( 15,  87)
max zeta_south =  0.294 m          at  ( it, ilon)     =  (  3,   0)
min zeta_south =  0.021 m          at  ( it, ilon)     =  (  9, 154)
max zeta_west  =  0.313 m          at  ( it, ilat)     =  (  3,  32)
min zeta_west  =  0.055 m          at  ( it, ilat)     =  ( 15, 389)
max ubar_north =  0.045 m/s        at  ( it, ilon)     =  ( 18, 127)
min ubar_north = -0.020 m/s        at  ( it, ilon)     =  ( 20,   5)
max ubar_south =  0.024 m/s        at  ( it, ilon)     =  (  0, 150)
min ubar_south = -0.020 m/s        at  ( it, ilon)     =  ( 20,   5)
max ubar_west  =  0.051 m/s        at  ( it, ilat)     =  (  2, 129)
min ubar_west  = -0.034 m/s        at  ( it, ilat)     =  ( 20, 300)
max vbar_north =  0.144 m/s        at  ( it, ilon)     =  (  7, 115)
min vbar_north = -0.013 m/s        at  ( it, ilon)     =  (  0,  54)
max vbar_south =  0.068 m/s        at  ( it, ilon)     =  ( 20, 185)
min vbar_south = -0.064 m/s        at  ( it, ilon)     =  ( 20, 235)
max vbar_west  =  0.015 m/s        at  ( it, ilat)     =  ( 20, 315)
min vbar_west  = -0.022 m/s        at  ( it, ilat)     =  ( 11, 159)
max u_north    =  0.273 m/s        at  ( it, iz, ilon) =  (  4,  32,  26)
min u_north    = -0.166 m/s        at  ( it, iz, ilon) =  ( 12,  36, 112)
max u_south    =  0.243 m/s        at  ( it, iz, ilon) =  ( 18,  32, 143)
min u_south    = -0.282 m/s        at  ( it, iz, ilon) =  (  4,  39,  27)
max u_west     =  0.386 m/s        at  ( it, iz, ilat) =  ( 20,  33, 128)
min u_west     = -0.459 m/s        at  ( it, iz, ilat) =  (  3,  38, 166)
max v_north    =  0.315 m/s        at  ( it, iz, ilon) =  (  4,  24, 116)
min v_north    = -0.278 m/s        at  ( it, iz, ilon) =  (  5,  39,  42)
max v_south    =  0.304 m/s        at  ( it, iz, ilon) =  ( 11,  33, 186)
min v_south    = -0.448 m/s        at  ( it, iz, ilon) =  ( 19,  39, 135)
max v_west     =  0.126 m/s        at  ( it, iz, ilat) =  ( 19,  34, 132)
min v_west     = -0.440 m/s        at  ( it, iz, ilat) =  ( 15,  39, 174)
max temp_north = 19.553 C          at  ( it, iz, ilon) =  ( 20,  39,   0)
min temp_north =  1.061 C          at  ( it, iz, ilon) =  ( 15,   0,   4)
max temp_south = 21.578 C          at  ( it, iz, ilon) =  (  4,  39, 246)
min temp_south =  1.106 C          at  ( it, iz, ilon) =  (  5,   0,   0)
max temp_west  = 21.003 C          at  ( it, iz, ilat) =  ( 20,  39,  38)
min temp_west  =  1.050 C          at  ( it, iz, ilat) =  ( 10,   0, 360)
max salt_north = 34.708 psu        at  ( it, iz, ilon) =  (  0,   0,   0)
min salt_north = 33.071 psu        at  ( it, iz, ilon) =  ( 13,  27,   0)
max salt_south = 34.707 psu        at  ( it, iz, ilon) =  ( 15,   0,   0)
min salt_south = 33.202 psu        at  ( it, iz, ilon) =  (  0,  27, 112)
max salt_west  = 34.709 psu        at  ( it, iz, ilat) =  ( 15,   0,  65)
min salt_west  = 32.891 psu        at  ( it, iz, ilat) =  (  0,  28, 258)
OCN BC nc data saved, correctly? 0 (0=yes)
done makeing BC nc file.
this took:
0:00:00.779921


getting the atm data now...
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl

ATM dict saved with pickle.
return code: 0 (0=good)
...done.
this took:
0:00:46.473927


PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
done with plotting ATM fields
this took:
0:00:05.622860


in atmfuns.get_atm_data_on_roms_grid(ATM,RMG)
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl

ATM on roms grid dict saved with pickle.
return code: 0 (0=good)
done with: atmfuns.get_atm_data_on_roms_grid(ATM,RMG)
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
done with: pltfuns.plot_all_fields_in_one(ATM, ATM_R, RMG, PFM)
this took:
0:00:12.023759


driver_run_forcast_LV1: saving ATM file to /scratch/PFM_Simulations/LV1_Forecast/Forc/LV1_ATM_FORCING.nc
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
return code: 0 (0=good)
driver_run_forecast_LV1:  done with writing ATM.nc file.
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
done with pltfuns.load_and_plot_atm(PFM)
this took:
0:00:05.211774


driver_run_forecast_LV1:  now make .in and .sb files
 --- making dot_in for 
...done
now running roms with slurm
run_slurm_LV1: current directory is now:  /scratch/PFM_Simulations/LV1_Forecast/Run
CompletedProcess(args=['sbatch', '--wait', 'LV1_SLURM.sb'], returncode=0, stdout=b'Submitted batch job 367\n', stderr=b'')
subprocess slurm ran correctly? 0 (0=yes)
run_slurm_LV1: run command:  ['sbatch', '--wait', 'LV1_SLURM.sb']
this took:
0:06:02.044424



Finished the LV1 simulation
now making LV1 history file plots
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
PFM info was loaded from /scratch/PFM_Simulations/PFM_run_info.pkl
Current time:  2024-09-04 04:22:08.735794
total time to run script was:
0:22:05.703798


